<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Game of Life</title>
</head>

<body>
    <script>
        var index = 0
        var allCells = [];
        class CellObj {
            setAlive() {
                if (this.cellDiv.classList.contains("unalive")) {
                    this.cellDiv.classList.remove("unalive");
                    this.cellDiv.classList.add("alive");
                } else if (!this.cellDiv.classList.contains("alive")) {
                    this.cellDiv.classList.add("alive");
                }
                this.isAlive = true;
            }
            setUnalive() {
                if (this.cellDiv.classList.contains("alive")) {
                    this.cellDiv.classList.add("unalive");
                    this.cellDiv.classList.remove("alive");
                } else if (!this.cellDiv.classList.contains("unalive")) {
                    this.cellDiv.classList.add("unalive");
                }
                this.isAlive = false;
            }
            cellOnclick() {
                if (this.isAlive) {
                    this.setUnalive();
                } else if (!this.isAlive) {
                    this.setAlive();
                } else {
                    console.log("ERROR");
                }
            }
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.cellDiv = document.createElement("div");
                this.cellDiv.classList.add("cell");
                this.cellDiv.classList.add("unalive");
                this.isAlive = false;
                this.cellDiv.onclick = this.cellOnclick.bind(this);
            }
            getDiv() {
                return this.cellDiv
            }
            calculteNextState() {
                //calculate next sate and set it to a variable
                this.nextState = 0;
            }

            applyNextState() {
                if (this.nextState == 1) {
                    setAlive();
                } else if (this.nextState == 0) {
                    setUnalive();
                }
            }
        }


        function populate(width, height) {
            for (var y = 0; y < height; y++) {
                var r = document.createElement("tr");
                for (var x = 0; x < width; x++) {
                    d = document.createElement("td");
                    c = new CellObj(x, y);
                    d.appendChild(c.getDiv());
                    r.appendChild(d);
                }
                const tbl = document.getElementById("gridTable");
                tbl.insertBefore(r, null);
            }
        }
    </script>


    <div class="gridArea">
        <table id="gridTable">
            <script>
                var width = 20;
                var height = 10;
                populate(width, height);
            </script>
        </table>
    </div>
</body>

</html>